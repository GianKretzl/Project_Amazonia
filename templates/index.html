<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Projeto Sombra Roxa</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
  </head>
  <body class="terminal-body intro-body">
    <!-- Background de imagem revelando progressivamente -->
    <div class="reveal-background">
      <div class="reveal-overlay"></div>
    </div>

    <div class="terminal-container">
      <div class="terminal-header">
        <span class="terminal-title">SISTEMA DE INVESTIGA√á√ÉO - GIAN KRETZL</span>
        <span class="terminal-status">‚óè ONLINE</span>
      </div>
      
      <!-- Informa√ß√£o do Grupo (se logado) -->
      <div id="grupo-info" class="grupo-info-banner" style="display: none;">
        <span class="grupo-label">Grupo:</span>
        <span id="grupo-nome-display" class="grupo-nome"></span>
        <span class="grupo-integrantes-label">Integrantes:</span>
        <span id="grupo-integrantes-display" class="grupo-integrantes"></span>
      </div>

      <div class="terminal-content">
        <div class="terminal-line">
          <span class="prompt">system@notebook:~$</span> <span class="typing-text" data-text="Inicializando sistema de entrevistas..."></span>
        </div>
        <div class="terminal-line delay-1">
          <span class="prompt">system@notebook:~$</span> <span class="typing-text" data-text="Verificando arquivos da jornalista..."></span>
        </div>
        <div class="terminal-line delay-2">
          <span class="status-ok">[OK]</span> <span>Sistema operacional</span>
        </div>
        <div class="terminal-line delay-3">
          <span class="status-warning">[AVISO]</span> <span>√öltima sess√£o: 3 dias atr√°s - Localiza√ß√£o: Amaz√¥nia Legal</span>
        </div>
        <div class="terminal-line delay-4">
          <span class="status-error">[CR√çTICO]</span> <span>Propriet√°ria do sistema: DESAPARECIDA</span>
        </div>
        
        <div class="terminal-line delay-5">
          <br>
          <div class="glitch-text" data-text="üéÆ PROJETO SOMBRA ROXA">üéÆ PROJETO SOMBRA ROXA</div>
        </div>
        
        <div class="terminal-line delay-6">
          <p class="story-text">
            Voc√™ √© um <strong>estagi√°rio de jornalismo</strong> que acabou de encontrar o notebook de<br>
            <span class="highlight-purple">Gian Kretzl</span>, uma jornalista investigativa desaparecida na Amaz√¥nia.<br><br>
            
            No sistema dela, voc√™ descobriu um arquivo de √°udio corrompido...<br>
            Sua √∫ltima mensagem antes de desaparecer.
          </p>
        </div>

        <div class="terminal-line delay-7">
          <div class="audio-corrupted">
            <div class="audio-wave"></div>
            <p class="audio-text">
              "Eu... <span class="static">[est√°tica]</span>... consegui. N√£o √© s√≥ desmatamento.<br>
              √â algo maior. Eles est√£o usando a 'Fazenda Nova Fronteira' como fachada.<br>
              O Dr. Arnaldo estava certo sobre o rio... <span class="static">[som de helic√≥ptero]</span><br>
              a <span class="highlight-purple">'Sombra Roxa'</span> √© real. Eles est√£o vindo.<br>
              A chave est√° no... <span class="static">[est√°tica]</span>... no mapa do Paj√©.<br>
              N√£o deixe eles vencerem. O sistema de entrevistas...<br>
              <span class="static">[est√°tica]</span>... confie apenas no que voc√™ conectar..."
            </p>
            <p class="transmission-end">[TRANSMISS√ÉO ENCERRADA]</p>
          </div>
        </div>

        <div class="terminal-line delay-8">
          <div class="mission-box">
            <h2>üéØ SUA MISS√ÉO</h2>
            <ul>
              <li>‚úì Descobrir o que √© a "Sombra Roxa"</li>
              <li>‚úì Entrevistar as fontes de Clara</li>
              <li>‚úì Conectar as pistas das 3 disciplinas</li>
              <li>‚úì Expor a conspira√ß√£o</li>
              <li>‚úì Descobrir o que aconteceu com Clara</li>
            </ul>
          </div>
        </div>

        <div class="terminal-line delay-9">
          <div class="cta-buttons">
            <a href="{{ url_for('briefing') }}" class="btn btn-primary">
              <span class="btn-icon">üìã</span> VER BRIEFING COMPLETO
            </a>
            <a href="{{ url_for('interview') }}" class="btn btn-secondary">
              <span class="btn-icon">üéôÔ∏è</span> ENTRAR NA SALA DE ENTREVISTAS
            </a>
          </div>
        </div>
      </div>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
      // Carregar informa√ß√µes do grupo
      fetch('/api/grupo-info')
        .then(res => res.json())
        .then(data => {
          if (data.grupo) {
            const banner = document.getElementById('grupo-info');
            document.getElementById('grupo-nome-display').textContent = data.grupo;
            document.getElementById('grupo-integrantes-display').textContent = data.integrantes.join(', ');
            banner.style.display = 'flex';
          }
        })
        .catch(err => console.log('Sem informa√ß√£o de grupo'));

      // Efeito de revela√ß√£o progressiva do background
      setTimeout(() => {
        const overlay = document.querySelector('.reveal-overlay');
        if (overlay) {
          overlay.classList.add('revealing');
        }
      }, 1000);
    </script>
  </body>
</html>
